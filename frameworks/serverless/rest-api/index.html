<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>REST API | 쿡앱스 기술 블로그</title>
    <meta name="description" content="sandbox 팀에서 운영하는 기술 블로그입니다.">
    <link rel="icon" href="/icon.png">
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="naver-site-verification" content="9f6fd9374b76e620a5d27ecde3ad0ce5ff285294">
  <meta name="google-site-verification" content="mE3gNyo5dv_Uw5cyV0Z-aAuOyYphLiu5ejyVAWk-ujE">
    
    <link rel="preload" href="/assets/css/0.styles.d12c699e.css" as="style"><link rel="preload" href="/assets/js/app.bdc570e9.js" as="script"><link rel="preload" href="/assets/js/19.563cbe5c.js" as="script"><link rel="preload" href="/assets/js/3.e459d297.js" as="script"><link rel="prefetch" href="/assets/js/10.8c6206d8.js"><link rel="prefetch" href="/assets/js/11.aa695e12.js"><link rel="prefetch" href="/assets/js/12.e541e2a4.js"><link rel="prefetch" href="/assets/js/13.9c1acf6e.js"><link rel="prefetch" href="/assets/js/14.3f66bced.js"><link rel="prefetch" href="/assets/js/15.725a10e7.js"><link rel="prefetch" href="/assets/js/16.f6336825.js"><link rel="prefetch" href="/assets/js/17.2f5b8a47.js"><link rel="prefetch" href="/assets/js/18.dac61c6c.js"><link rel="prefetch" href="/assets/js/2.e34b6f30.js"><link rel="prefetch" href="/assets/js/20.e3ff4309.js"><link rel="prefetch" href="/assets/js/21.6ba84245.js"><link rel="prefetch" href="/assets/js/22.b287b7eb.js"><link rel="prefetch" href="/assets/js/23.17ecc02d.js"><link rel="prefetch" href="/assets/js/24.7681d1f1.js"><link rel="prefetch" href="/assets/js/25.b1827863.js"><link rel="prefetch" href="/assets/js/26.b9cc6cc5.js"><link rel="prefetch" href="/assets/js/27.5d6b0b05.js"><link rel="prefetch" href="/assets/js/28.52fa5ebf.js"><link rel="prefetch" href="/assets/js/29.9793156c.js"><link rel="prefetch" href="/assets/js/30.b19e4f16.js"><link rel="prefetch" href="/assets/js/4.81b4116f.js"><link rel="prefetch" href="/assets/js/5.33054d91.js"><link rel="prefetch" href="/assets/js/6.ed5ccd4c.js"><link rel="prefetch" href="/assets/js/7.db887615.js"><link rel="prefetch" href="/assets/js/8.2685572d.js"><link rel="prefetch" href="/assets/js/9.093f07b6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d12c699e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">쿡앱스 기술 블로그</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/frameworks/" class="nav-link router-link-active">Frameworks</a></div><div class="nav-item"><a href="/cook-dev/" class="nav-link">Cook Dev</a></div><div class="nav-item"><a href="/cheat-sheet/" class="nav-link">Cheat Sheet</a></div><div class="nav-item"><a href="https://www.cookapps.com/jobs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Jobs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/cookpi/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/frameworks/" class="nav-link router-link-active">Frameworks</a></div><div class="nav-item"><a href="/cook-dev/" class="nav-link">Cook Dev</a></div><div class="nav-item"><a href="/cheat-sheet/" class="nav-link">Cheat Sheet</a></div><div class="nav-item"><a href="https://www.cookapps.com/jobs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Jobs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/cookpi/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/frameworks/" class="sidebar-link">Frameworks</a></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Serverless</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/frameworks/serverless/" class="sidebar-link">Overview</a></li><li><a href="/frameworks/serverless/rest-api/" class="active sidebar-link">REST API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frameworks/serverless/rest-api/#rest-api란" class="sidebar-link">REST API란?</a></li><li class="sidebar-sub-header"><a href="/frameworks/serverless/rest-api/#rest-api-의-시작-부제-전쟁의-서막" class="sidebar-link">REST API 의 시작(부제: 전쟁의 서막)</a></li><li class="sidebar-sub-header"><a href="/frameworks/serverless/rest-api/#rest-api로-통합" class="sidebar-link">REST API로 통합</a></li><li class="sidebar-sub-header"><a href="/frameworks/serverless/rest-api/#rest-api-설계" class="sidebar-link">REST API 설계</a></li></ul></li><li><a href="/frameworks/serverless/tutorial-serverless-express-aurora/" class="sidebar-link">Tutorial: serverless-express-aurora</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Firebase</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>AWS</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>GCP</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Unity</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="rest-api"><a href="#rest-api" aria-hidden="true" class="header-anchor">#</a> REST API <span class="badge tip top" data-v-099ab69c>jwkim2</span></h1> <div class="small">뒤에 이어질 [Tutorial: serverless-express-aurora](/frameworks/serverless/tutorial-serverless-express-aurora.html)를 위하여 REST API 에 대하여 잠시 설명합니다. 본 포스팅은 차후 API 카테고리로 이전 예정입니다.</div> <h2 id="rest-api란"><a href="#rest-api란" aria-hidden="true" class="header-anchor">#</a> REST API란?</h2> <p><strong>REST(REpresentational State Transfer) API:</strong> 대의적(대표적) 상태 전달 API<br>
무슨 말인지 모르겠습니다.</p> <p><strong>HTTP URI(Uniform Resource Identifier)를 통해 자원(Resource)을 명시하고 자원에 대한 행위를 HTTP Method를 통해 정의한다.</strong><br>
마음와 와닫지 않습니다.</p> <p><strong>2000년도 Roy Fielding의 박사학위 논문에서 최초로 소개 되었고, Roy Fielding은 HTTP의 주요 저자중 한 사람으로 웹의 아키텍처의 우수성에 비해 제대로 사용되어지지 못하는 모습에 안타까워하면 웹의 장점을 최대한 활용할 수 있는 아키텍처로써 REST를 발표했다고 합니다.</strong><br>
어쩌라고? (로이 박사님 죄송 ㅠㅠ)</p> <p>REST는 거의 20년이나 된 것이기 때문에 자료도 너무 많은데도 불구하고 아직 개념을 제대로 이해하지 못한 분들도 있고, &quot;읽어봐도 뭔 소리인지 잘모르겠다&quot;라고 하는 사람들도 있습니다. 어렴풋이는 대충 알고 있는데 명확하게 설명을 잘 못하는 사람들도 있습니다. 제가 보았을때 공학을 너무 공학적으로 설명한(?) 글들이 많아 내용을 보고도 이해가 잘 되지 않았던것 같습니다.</p> <p>사실 좋은 글들이 많은데 굳이 같은 내용을 제가 다시 설명하는 것은 큰 의미가 없는 것 같아서 조금 다른 방식으로 접근 해보려고 합니다.(이 블로그는 원래 평범하지 않습니다.)</p> <h2 id="rest-api-의-시작-부제-전쟁의-서막"><a href="#rest-api-의-시작-부제-전쟁의-서막" aria-hidden="true" class="header-anchor">#</a> REST API 의 시작(부제: 전쟁의 서막)</h2> <p>웹 개발자로 일하던 쿡이라는 사람이 있습니다. 쿡은 여러 Third Party 서비스를 한번에 연동하는 서비스를 개발하고 있습니다.</p> <p>A라는 서비스의 친구 관련 API 를 물어보니, GetFriendInfo 라고 합니다.<br>
B라는 서비스에 물어보니 GetFriends 라고 합니다.<br>
C라는 서비스에 물어보니 GetMyFriendsInfo 라고 합니다.<br></p> <p>WTF, 세 업체 친구 리스트를 연동해야 하는데 각각 이름이 다 다릅니다. 이번에는 친구 추가 API 입니다.</p> <p>A 서비스: AddFriendInfo<br>
B 서비스: AddFriends<br>
C 서비스: AddMySuperUltraLovelyFriendInfo<br></p> <p>이런 API 각 서비스별로 120개씩 존재합니다. 쿡은 이베이를 통해 심장약과 칼을 주문합니다.</p> <p>이번에는 연동을 위해서 어떤 프로토콜을 사용하는지 물어봤습니다.</p> <p>A 서비스: HTTP/JSON<br>
B 서비스: SOAP/XML<br>
C 서비스: TCP/PACKET<br></p> <p>쿡은 이베이를 통해 바로 바주카포를 주문합니다. 6.25때 난리는 난리도 아닙니다.</p> <h2 id="rest-api로-통합"><a href="#rest-api로-통합" aria-hidden="true" class="header-anchor">#</a> REST API로 통합</h2> <p>각각의 서비스들마다 API 를 정의하는 방식과 연동 방법이 다르다보니 일일히 각 서비스에 맞춰서 개발을 하느라 시간이 오래 걸리고 생산성이 나지 않습니다. 결국 하고 싶은 것은 데이터를 읽기,추가,수정,삭제 4가지 뿐인데(-그것이 친구 데이터이든 아이템 데이터이든-) 부가적으로 할것이 너무 많습니다.</p> <p>잘 생각해보니, DB에서 하는 일이라고는 트랜젝션이다 프로시져다 머다해도 결론적으로는 읽기(SELECT),추가(INSERT),수정(UPDATE),삭제(DELETE) 뿐이 없습니다.</p> <p>잘 생각해보니, HTTP 에서는 GET,POST,PUT,DELETE 의 4가지 Methods 를 지원합니다.(사실 몇개 더 있습니다.)</p> <p>바로 이거다. 하나의 자원에 대해서 HTTP를 통해서 GET(SELECT), POST(INSERT), PUT(UPDATE), DELETE(DELETE) 를 하자. 그리고 편의를 위해서 무조건 JSON 형태로 주고 받자.</p> <table><thead><tr><th>URL</th> <th>GET</th> <th>POST</th> <th>PUT</th> <th>DELETE</th></tr></thead> <tbody><tr><td>service/friends</td> <td>친구 정보 얻기</td> <td>친구 추가</td> <td>친구 정보 수정</td> <td>친구 삭제</td></tr> <tr><td>service/items</td> <td>아이템 정보 얻기</td> <td>아이템 추가</td> <td>아이템 정보 수정</td> <td>아이템 삭제</td></tr></tbody></table> <p>이것이 바로 REST API 입니다. 물론 쿡 혼자서 각 서비스들에게 API 를 변경하라고 할수는 없지만, 현실에서 각 서비스 제공자든 서비스 소비자든 통합을 원했고 이런 방식으로 표준스럽게 채택하여 사용하기 시작합니다.('표준스럽게라'라고 표현한것은 표준 위원회에서 공식적으로 채택한 내용은 아니나 사람들이 많이 사용하여 표준처럼 사용이 되어왔습니다.)</p> <p>REST API 란 각기 다른 서비스나 서버-클라이언트 간에 규약입니다. 이름도 방식도 중구난방으로 하면 서로 힘드니 우리 이런 방식으로 통일해서 사용하자 해서 고착화 된 것이 REST API 입니다.</p> <p>(쿡은 구매한 무기를 모두 환불합니다.)</p> <h2 id="rest-api-설계"><a href="#rest-api-설계" aria-hidden="true" class="header-anchor">#</a> REST API 설계</h2> <p>위에서 언급한바와 같이 REST API 는 정확한 표준은 아닙니다. 그냥 이런식으로 하자라고 고착화 된 것이다보니 완전히 통일이 되지 않았습니다. 대부분 많이 쓰는 방식이 존재하나 그것이 REST 다 라고 정의하기는 힘듭니다.(REST 스럽게 구현했다고 해서 RESTFul API 라는 표현도 합니다.)</p> <p>이에 필자가 많은 사람들이 사용하는 방식으로 간단한 REST API를 정의하려고 합니다만 다른 사람도 모두 같은 방식을 쓰는 것은 아니라는 것만 염두해 두시면 됩니다.(실제로 개발에는 REST 보다는 차세대 API 방식인 GraphQL을 사용합니다.)</p> <h3 id="rest-api-필요-개념"><a href="#rest-api-필요-개념" aria-hidden="true" class="header-anchor">#</a> REST API 필요 개념</h3> <p>REST API 의 URL의 끝에 ID가 붙는지 안붙는지에 따라서 크게 두가지 형태로 나뉩니다.</p> <ul><li>컬렉션(Collection): 집합(Array) &gt; 유저들, 아이템들, 이벤트들</li> <li>도큐먼트(Document): 객체 하나(Object) &gt; 유저, 아이템, 이벤트</li></ul> <p>중첩된 구조일 경우 상위 URL 에 종속적입니다. 다음은 예시입니다.</p> <table><thead><tr><th>URL</th> <th>구분</th> <th>설명</th></tr></thead> <tbody><tr><td>/users</td> <td>컬렉션</td> <td>유저 리스트</td></tr> <tr><td>/users/111</td> <td>도큐먼트</td> <td>유저 번호가 111 인 유저 정보</td></tr> <tr><td>/users/111/items</td> <td>컬렉션</td> <td>유저 번호가 111 인 유저의 모든 아이템 리스트</td></tr> <tr><td>/users/111/items/123</td> <td>도큐먼트</td> <td>유저 번호가 111 인 유저의 아이템중 아이템 번호가 123 인 아이템 하나의 정보</td></tr></tbody></table> <h3 id="rest-api-설계-규칙"><a href="#rest-api-설계-규칙" aria-hidden="true" class="header-anchor">#</a> REST API 설계 규칙</h3> <ul><li>소문자, 숫자, -(대시)만 사용: _(언더바 사용안함)</li> <li>동사보다는 명사를 사용</li> <li>복수 명사만 사용, 단수 사용 안함</li> <li>슬래시(/)는 계층 관계</li> <li>Stateless(무상태성): API 자체는 상태를 가지지 않음. Cookie, Session 등을 사용하지 않고 단순이 들어오는 요청값에 의해서만 처리하여 구현이 단순해 짐. 인증은 JWT를 사용하고 상태가 필요한 정보는 DB에 질의 함</li></ul> <div class="small">예외: 자원이 대상이 아닌 인증등의 행위에 대해서는 동사를 허락하고 POST 방식을 사용(Web Form 과 동일)</div> <h4 id="http-method"><a href="#http-method" aria-hidden="true" class="header-anchor">#</a> HTTP Method</h4> <table><thead><tr><th>GET</th> <th>POST</th> <th>PUT</th> <th>DELETE</th></tr></thead> <tbody><tr><td>SELECT</td> <td>INSERT</td> <td>UPDATE</td> <td>DELETE</td></tr> <tr><td>조회</td> <td>추가</td> <td>수정</td> <td>삭제</td></tr></tbody></table> <h4 id="http-응답-코드"><a href="#http-응답-코드" aria-hidden="true" class="header-anchor">#</a> HTTP 응답 코드</h4> <ul><li>200: 성공</li> <li>400: 잘못된 요청(파라미터를 잘못 보낸 경우)</li> <li>403: 권한 없음(유저가 어드민 API를 호출한 경우)</li> <li>404: 리소스 없음(존재하지 않는 리소스를 요청한 경우)</li> <li>500: 서버 오류(서버 내부 예외 상황)</li></ul></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/cookpi/blog/edit/master/docs/frameworks/serverless/rest-api/README.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">3/20/2019, 9:12:15 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/frameworks/serverless/" class="prev router-link-active">
          Overview
        </a></span> <span class="next"><a href="/frameworks/serverless/tutorial-serverless-express-aurora/">
          Tutorial: serverless-express-aurora
        </a>
        →
      </span></p></div> <div id="disqus_thread" class="content" style="padding-top:0px;"></div></div> <!----></div></div>
    <script src="/assets/js/app.bdc570e9.js" defer></script><script src="/assets/js/19.563cbe5c.js" defer></script><script src="/assets/js/3.e459d297.js" defer></script>
  </body>
</html>
